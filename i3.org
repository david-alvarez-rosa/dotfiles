#+TITLE: i3 Window Manager Configuration
#+LANGUAGE: en
#+AUTHOR: David Álvarez Rosa
#+EMAIL: david@alvarezrosa.com
#+DESCRIPTION: My personal i3 Window Manager configuration file.
#+PROPERTY: header-args :tangle ~/.config/i3/config



#+begin_src conf
  # Archivo de configuración de i3.
  set $mod Mod4

  # Fuente para los títulos de las ventanas.
  # font pango:mono 11
  font pango:DejaVu Sans Mono 8

  # Configuración inicial de espacios.
  gaps inner 6
  gaps outer 4

  # No mostrar bordes de las ventanas.
  new_window 1pixel
  default_border pixel 1

  # Configurar dunst para notificaciones:
  exec --no-startup-id dunst
  # Iniciar i3.
  exec --no-startup-id ".scripts/i3start"
  # Configurar teclado.
  exec --no-startup-id ".scripts/keyboard"

  # Use Mouse+$mod to drag floating windows to their wanted position
  floating_modifier $mod

  # Abrir una terminal.
  bindsym $mod+Return exec i3-sensible-terminal

  # Permite cambiar entre los dos últimos espacios de trabajo.
  bindsym $mod+Tab workspace back_and_forth

  # Cerrar la ventana actual.
  bindsym $mod+q kill

  # Abrir "dmenu": menú para lanzar programas.
  bindsym $mod+d exec dmenu_run

  # Abrir "rofi": menú para lanzar programas.
  bindsym $mod+r                 exec rofi -show drun

  # Cambiar ventana seleccionada.
  bindsym $mod+b                 focus left
  bindsym $mod+n                 focus down
  bindsym $mod+p                 focus up
  bindsym $mod+f                 focus right
  # Cambiar ventana seleccionada (alternativo).
  bindsym $mod+Left              focus left
  bindsym $mod+Down              focus down
  bindsym $mod+Up                focus up
  bindsym $mod+Right             focus right
  # No circular al cambiar.
  focus_wrapping no

  # Mover la ventana actual.
  bindsym $mod+Shift+b           move left 20px
  bindsym $mod+Shift+n           move down 20px
  bindsym $mod+Shift+p           move up 20px
  bindsym $mod+Shift+f           move right 20px
  # Mover la ventana actual (alternativo).
  bindsym $mod+Shift+Left        move left 20px
  bindsym $mod+Shift+Down        move down 20px
  bindsym $mod+Shift+Up          move up 20px
  bindsym $mod+Shift+Right       move right 20px

  # Cambiar el modo de división de pantalla.
  bindsym $mod+v                 split vertical
  bindsym $mod+h                 split horizontal

  # Entrar/Salir del modo de pantalla completa.
  bindsym $mod+o                 fullscreen toggle

  # Poner/Quitar en todos los espacios de trabajo.
  bindsym $mod+Shift+w           sticky toggle

  # toggle tiling / floating
  bindsym $mod+Shift+space floating toggle

  # change focus between tiling / floating windows
  bindsym $mod+space focus mode_toggle

  # Comando para abrir Transmission (para los torrents).
  bindsym $mod+Shift+t exec --no-startup-id "(pgrep -x transmission-da > /dev/null || (transmission-daemon && notify-send 'Transmission daemon' 'Starting transmission daemon...')) && st -t Transmission tremc"
  for_window [title="Transmission"] floating enable, resize grow left 175, resize grow right 175, resize grow down 75, resize grow up 75

  # Comando para actualizar el correo.
  bindsym $mod+Shift+m exec --no-startup-id "~/.scripts/cronjobs/updateMail '' 'yes'"

  # Comandos para captura de pantalla.
  bindsym Print                            exec --no-startup-id "~/.scripts/screenshot"
  bindsym $mod+Print                    	 exec --no-startup-id "~/.scripts/screenshot u"
  bindsym Control+Print              	     exec --no-startup-id "~/.scripts/screenshot s"

  # Mover ventana abajo a la derecha (para vídeo).
  bindsym $mod+Shift+v                     floating toggle; exec --no-startup-id ~/.scripts/bottomright; sticky enable

  # Abrir "mpv" siempre en pequeño abajo a la derecha.
  for_window [class="mpv"]                 floating enable; exec --no-startup-id ~/.scripts/bottomright
  for_window [class="mpv"]                 sticky enable

  # Definición de nombres para los diferentes espacios de trabajo.
  set $ws1 "1. Emacs"
  set $ws2 "2. Browser"
  set $ws3 "3. Terminal"
  set $ws4 "4. Ranger"
  set $ws5 "5. Communication"
  set $ws6 "6. Executing"
  set $ws7 "7. Media"
  set $ws8 "8. Firefox"
  set $ws9 "9. Auxiliar"
  set $ws10 "10"

  # Ir al un espacio de trabajo.
  bindsym $mod+1 workspace $ws1
  bindsym $mod+2 workspace $ws2
  bindsym $mod+3 workspace $ws3
  bindsym $mod+4 workspace $ws4
  bindsym $mod+5 workspace $ws5
  bindsym $mod+6 workspace $ws6
  bindsym $mod+7 workspace $ws7
  bindsym $mod+8 workspace $ws8
  bindsym $mod+9 workspace $ws9
  bindsym $mod+0 workspace $ws10

  # Mover ventana actual a otro espacio de trabajo.
  bindsym $mod+Shift+1 move container to workspace $ws1
  bindsym $mod+Shift+2 move container to workspace $ws2
  bindsym $mod+Shift+3 move container to workspace $ws3
  bindsym $mod+Shift+4 move container to workspace $ws4
  bindsym $mod+Shift+5 move container to workspace $ws5
  bindsym $mod+Shift+6 move container to workspace $ws6
  bindsym $mod+Shift+7 move container to workspace $ws7
  bindsym $mod+Shift+8 move container to workspace $ws8
  bindsym $mod+Shift+9 move container to workspace $ws9
  bindsym $mod+Shift+0 move container to workspace $ws10

  # Abrir inicialmente "qutebrowser" en su espacio de trabajo.
  assign [class="qutebrowser"] $ws2

  # Abrir inicialmente "emacs" en su espacio de trabajo.
  assign [class="Emacs"] $ws1

  # Abrir inicialmente imágenes de "octave" en su espacio de trabajo.
  assign [class="GNU Octave"] $ws6

  # Abrir inicialmente imágenes de "python" en su espacio de trabajo.
  assign [class="matplotlib"] $ws6

  # Abrir inicialmente "Firefox" en su espacio de trabajo.
  assign [class="firefox"] $ws8

  # Abrir inicialmente "LibrOffice" y "Gimp" en espacio de trabajo auxiliar.
  assign [class="(?i)office.*"] $ws9
  assign [class="(?i)gimp.*"] $ws9

  # Apagar el ordenador.
  bindsym $mod+x                  exec --no-startup-id ~/.scripts/i3shutdown
  bindsym $mod+Shift+x            exec --no-startup-id ~/.scripts/i3reboot

  # Recargar la configuración de i3.
  bindsym $mod+Shift+c reload
  # Reiniciar i3.
  bindsym $mod+Shift+r restart
  # Salir de i3.
  bindsym $mod+Shift+e exec "i3-nagbar -t warning -m 'You pressed the exit shortcut. Do you really want to exit i3? This will end your X session.' -b 'Yes, exit i3' 'i3-msg exit'"
  # Ocultar/Mostrar la barra.
  bindsym $mod+m bar mode toggle

  # comandos para resize
  bindsym $mod+Control+f exec --no-startup-id "bash ~/.scripts/i3resize right"
  bindsym $mod+Control+p exec --no-startup-id "bash ~/.scripts/i3resize up"
  bindsym $mod+Control+n exec --no-startup-id "bash ~/.scripts/i3resize down"
  bindsym $mod+Control+b exec --no-startup-id "bash ~/.scripts/i3resize left"

  # Leer colores de .Xdefaults.
  set_from_resource $darkblack    color0
  set_from_resource $darkblue     color4
  set_from_resource $blue         color1
  set_from_resource $cyan         color1
  set_from_resource $darkwhite    color7
  set_from_resource $white        color1

  # Configuración de la barra.
  bar {
      font pango:mono 8
      # colors {
      #     background $darkblack
      #     statusline $darkwhite
      #     separator $cyan
      #     focused_workspace  $blue $darkblue $white
      #     active_workspace   $blue $blue $white
      #     inactive_workspace $darkblack $darkblack $darkwhite
      #     urgent_workspace   $darkblack $darkblack $white
      # }
      status_command i3blocks
      position top
      mode dock
  }
#+end_src
